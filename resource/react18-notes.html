<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 170,000 words, please read some of them. -->
<title>React 18 Architecture</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="A very detailed article on React 18 Architecture to act as a single page cheat-sheet. Target audience: Software engineers who have used many frameworks, and like detailed notes. The notes are by a software engineer on how React18 works; and what features got in the completed edition.  I explain all 15 React Hooks; 23 React18 methods and 3 built-in tags." />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="React 18 Architecture">
<meta itemprop="description" content="A very detailed article on React 18 Architecture to act as a single page cheat-sheet. Target audience: Software engineers who have used many frameworks, and like detailed notes. The notes are by a software engineer on how React18 works; and what features got in the completed edition.  I explain all 15 React Hooks; 23 React18 methods and 3 built-in tags.">
<meta name="twitter:site" content="@channelOwen">
<meta name="twitter:title" content="React 18 Architecture">
<meta name="twitter:description" content="A very detailed article on React 18 Architecture to act as a single page cheat-sheet. Target audience: Software engineers who have used many frameworks, and like detailed notes. The notes are by a software engineer on how React18 works; and what features got in the completed edition.  I explain all 15 React Hooks; 23 React18 methods and 3 built-in tags.">
<meta name="twitter:creator" content="@channelOwen">
<meta property="og:title" content="React 18 Architecture" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/react18-notes" />
<meta property="og:description" content="A very detailed article on React 18 Architecture to act as a single page cheat-sheet. Target audience: Software engineers who have used many frameworks, and like detailed notes. The notes are by a software engineer on how React18 works; and what features got in the completed edition.  I explain all 15 React Hooks; 23 React18 methods and 3 built-in tags." />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="17th of Apr 2023, 8:50:12" />
<meta property="article:modified_time" content="6th of Mar 2023" />
<link rel="canonical" href="https://owenberesford.me.uk/resource/react18-notes" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "React 18 Architecture",
	"article:published_time":"17th of Apr 2023, 8:50:12", 
    "article:modified_time":"6th of Mar 2023",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body" class="annoyingBody">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker">
<p><b>Target audience</b>: Software engineers who have used many frameworks, and like detailed notes.</p>

<p>Architecture notes for React 18 on one simple page, with no banner ads.  The idea for “good docs” is typically either likely to be “here are ThreeThings to need to know” (small list to make it easier); or “here is Everything” (reading source-code is a slower process and to be avoided).  I am definitely on the Everything model.  @dan_abramov recently said he had spent several months updating docs <sup><a href="https://twitter.com/dan_abramov/status/1567854990479220736" target="_blank">1</a></sup>, I suspect what he has written is what I'm reading / referenced.  Managing re-renders is an important task for react based apps, and not what this article is doing; however read <sup><a href="https://www.developerway.com/posts/react" target="_blank">2</a></sup>.</p>


<hr />
<div class="lotsOfWords">
<ul class="ulbasic">
    <li class="libasic">A vastly over engineered diagram, drawn in React <sup><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank">1</a></sup>.  Someone's test code to explore hooks <sup><a href="https://github.com/GregNicholas/hooks-in-react18-next" target="_blank">2</a></sup> </li>
</ul>

<p>The newest version of React has a slightly different life cycle model; and some of the older process have been retired <sup><a href="https://reactjs.org/docs/state-and-lifecycle.html" target="_blank">3</a></sup> <sup><a href="https://medium.com/how-to-react/react-life-cycle-methods-with-examples-2bdb7465332b" target="_blank">4</a></sup> <sup><a href="https://medium.com/swlh/react-lifecycle-hooks-71547ef4e7a8" target="_blank">5</a></sup>.</p>


<h2 class="dontend" id="toc0"> Architecture prefix <a href="#toc0"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<p>Older versions of React supported FP, but didn't push a developer towards it so strongly. Many people wrote components as JS classes. An end user level diagram would look like this: <img src="/asset/react16-arch.webp" width="100%" height="inherit" alt="Diagram of React16 architecture; pls see full webpage in following attribution" title="Diagram of React16 architecture; pls see full webpage in following attribution" />, image taken from <a href="https://www.communicationcrafts.com/react-architecture-best-practices-and-tips-from-experts/" target="_blank">communicationcrafts</a>.  This has some good points, and some bad points; but looks like code written in other languages.  Larger projects would become messy and slow; unless tightly managed.</p>

<p>'Modern React' i.e. after v16.6 has a more functional architecture; using many hooks.  Many people in JS like FP; and so think that this is a better way to build things.  As a side effect of moving to FP, it is more strongly reactive; see <a class="" href="https://owenberesford.me.uk/resource/reactive-architecture#">reactive-architecture</a> for more details.  JS, as used in webrowsers, is very much a single thread of execution; many JS people try to hide this limitation.  JS Webworkers are roughly a OS process thread; and roughly allow better async processing; but the communication and synchronisation bottle-neck is terrible.  Compare language features with a non-browser Java app (probably on your Android) for a realistic second opinion.  A React stack cannot be properly reactive whilst it only uses a single process/ thread execution context.</p>

<p>Like many frameworks; React18 is using ObjectComposition pattern <sup><a href="https://en.wikipedia.org/wiki/Object_composition" target="_blank">6</a></sup>.   A reason to upgrade to React18 is attempts at concurrency have been created <sup><a href="https://www.react18.com/concurrency" target="_blank">7</a></sup> <sup><a href="https://reactjs.org/blog/2022/03/29/react-v18.html#what-is-concurrent-react" target="_blank">8</a></sup>.  The framework for concurrency allows Batching.   If you are using server side rendering; you will like Suspense (new feature); but were probably using it previously via plugin like Nextjs or Hydrogen <sup><a href="https://www.freecodecamp.org/news/whats-new-in-react-18/" target="_blank">9</a></sup>.</p>


<h5 id="toc1"> Project structure of React18</h5>
<p>Most developers interact with React via JSX.  This is a convenience notation for humans that the compilers discard quite quickly; read <sup><a href="https://ui.dev/react-elements-vs-react-components" target="_blank">10</a></sup> <sup><a href="https://reactjs.org/docs/jsx-in-depth.html" target="_blank">11</a></sup> if this statement is new to you.   “Recent” versions of React (larger than React 2, I think) split the bit of react that interacts with the DOM, from the bits that are creating and processing events.   The DOM section has different implementations depending which JS runtime the app is hosted in (Mobile native, browser native, or server emulation).  More details <sup><a href="https://techstacker.com/react-vs-react-dom-vs-react-native-whats-the-difference/" target="_blank">12</a></sup> <sup><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units" target="_blank">13</a></sup>.   The most important thing in the update-DOM code is a function that compares an old state with a newer state and makes a diff <sup><a href="https://reactjs.org/docs/reconciliation.html" target="_blank">14</a></sup> <sup><a href="https://medium.com/@abdellani/how-does-the-diff-algorithm-work-in-react-js-c4296548f84b" target="_blank">15</a></sup>.  The diff is what is applied to the real DOM in this update cycle.  To make the diff-ing work better, React creates a VirtualDOM structure <sup><a href="https://www.testim.io/blog/shadow-dom-vs-virtual-dom/" target="_blank">16</a></sup> <sup><a href="https://medium.com/duomly-blockchain-online-courses/shadow-dom-vs-virtual-dom-what-is-the-difference-f2611da536ab" target="_blank">17</a></sup> as an intermediate structure which is closer to the DOM.</p>

<p>The most import distinction between a website (made up of pages) and a webapp (made up of screens) is the singular page/ DOM loaded.  Although there is caching, each webpage in a website is a separate thing/ DOM; and will load its libraries each impression.   An app loads its heavy libraries once (ideally in an install phase, not every 09:02 when you start working).  This implies apps need to be more careful with memory management, and use some sort of Router to change to the next screen.   I have never needed to use any router other than the basic one, per toolkit.  For React in the browser, its <sup><a href="https://ui.dev/react-router-tutorial" target="_blank">18</a></sup> <sup><a href="https://www.npmjs.com/package/react-router" target="_blank">19</a></sup>; there is a React-native version (as pages are a “user-land” programmer structure there) <sup><a href="https://dev.to/syncfusion/react-router-vs-react-router-dom-mfl" target="_blank">20</a></sup>.  Most Router libraries are using the History object in the JS interpreter; but the recipe it outlined in <sup><a href="https://ogzhanolguncu.com/blog/build-a-custom-react-router-from-scratch" target="_blank">21</a></sup> <sup><a href="https://reactnavigation.org/docs/custom-routers/" target="_blank">22</a></sup>.</p>

<p>Graphic design is not the same discipline as form/ data-system UI design.  Imagine if every invoice has custom typography and styling, so one needed a custom reader to process it.   Quite a few React people like the idea of having custom CSS for each Component.  Whilst this does lead to more reusable Components; nearly all my foreground items are in $foreground1 colour whatever that is defined as.  Occasionally there maybe some specific colouration; but as people use one font per screen; there is normally one foreground colour.  It seems more sensible to define UI style on a per app basis; or better, adjusted per user, as this helps this user use the system.  If per-component CSS is needed, it should be regulated by using CSS variables and relative units, as the user is using the whole ecosystem rather than just your button <sup><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" target="_blank">23</a></sup> <sup><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units" target="_blank">24</a></sup>.  A component with a local stylesheet should have double settings, e.g. background-color: var(--bgcolour, #fdfdfd); so, when not supplied, a value is still used <sup><a href="https://stackoverflow.com/questions/68546715/is-it-possible-to-check-if-a-css-variable-is-defined-or-not" target="_blank">25</a></sup>.  Use of CSS variables makes it much easier to use and create Themes... <br />
</p>


<h5 id="toc2"> Related material</h5>
<p><b>Isomorphic structures</b> ~ the word means “corresponding or similar in form or relations” ~ are stated to be: a) faster loading, b) have better accessibility for search, and c) with better support for old browsers.   React based apps can be structured to support this architecture.   They need to be run on a larger server, as the React Widgets are rendered to HTML there.   <strong>However</strong>, Google ~ and I assume other large search engines ~ execute JS when they crawl, so search accessibility limits less relevant.  Fairly recently Microsoft have cancelled MSIE support; so the most awkward browser is now Safari; and that is much less awkward; so old browsers should be less important too.  Longer notes about isomorphic apps are <sup><a href="https://www.baeldung.com/react-nashorn-isomorphic-app" target="_blank">26</a></sup> <sup><a href="https://stackoverflow.com/questions/43064707/what-does-isomorphic-react-mean" target="_blank">27</a></sup> <sup><a href="https://www.delftstack.com/howto/react/isomorphic-react/" target="_blank">28</a></sup> <sup><a href="https://www.ohmycrawl.com/isomorphic-react/" target="_blank">29</a></sup>. <br />
It would be an extremely heretical statement; but this architecture can be achieved by using a “less React” approach.  If some site features are made with accessible HTML5 and CSS (possibly as an inline STYLE block element); it will be faster.  The complex / very often updated features are a better fit for React and should stay inside this. For large projects, it feels fairly simple to have an engine made in Python or Golang or something that emits either: a) a block of HTML + modular CSS + JS event handlers; b) a minified JS file containing a React component of the same data without JSX.  Generating a JS file from source data is a well understood problem and could be automated.  Most of the complex JS code should be in a different JS file, and imported as needed.</p>

<p>There are some complexities with the JS object model; the Arrays need more special handling than is desirable.  As part of FP, <b>Immutable.js</b> was created and is a widely talked about feature.   In languages with a proper const; I use const widely; for data that should persist, but not change.  There are a couple of libraries to make variables Immutable, and there are awkward language features to deliver the same.  Immutable <sup><a href="https://immutable-js.com/" target="_blank">30</a></sup> <sup><a href="https://www.npmjs.com/package/immutable" target="_blank">31</a></sup> <sup><a href="https://www.sitepoint.com/immutability-javascript/" target="_blank">32</a></sup>.</p>


</div>
<hr />
<div class="lotsOfWords">

<h3 class="dontend" id="toc3"> React18 hooks <sup><a href="https://reactjs.org/docs/hooks-intro.html" target="_blank">1</a></sup></h3>
<p>Most of these function names are well chosen, and are really obvious/ clear.  I have added the behavioural notes for when I am feeling stupid and so needing documentation.</p>

<ul class="ulbasic">
    <li class="libasic"><b>useState()</b> <sup><a href="https://reactjs.org/docs/hooks-state.html" target="_blank">2</a></sup> COMMON ~ Stores a value, with a process to update it.<ul class="ulbasic">
        <li class="libasic">const [state, setState] = useState(initialState);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useEffect()</b> <sup><a href="https://reactjs.org/docs/hooks-effect.html" target="_blank">3</a></sup> <sup><a href="https://reactjs.org/docs/hooks-reference.html#useeffect" target="_blank">4</a></sup> COMMON ~ Place a function that will get executed when a value of data changes.  It is designed for expensive function calls (...networking).  USE CAREFULLY, be aware of recursive effects, and update cascades if multiple useEffect() are created.  The function is executed with the item in data as params.  This is triggered after render() <sup><a href="https://stackoverflow.com/a/68201925/2375161" target="_blank">5</a></sup>, which is why re-triggering is problematic. <ul class="ulbasic">
        <li class="libasic">useEffect(()=&gt;()=&gt;void, [data*])</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useMemo()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#usememo" target="_blank">6</a></sup> <sup><a href="https://en.wikipedia.org/wiki/Memoization" target="_blank">7</a></sup> COMMON ~ Computes a value, triggered by changes in params.  This is executed during the render(), if there is a change <sup><a href="https://stackoverflow.com/questions/71925654/difference-between-useeffect-and-usememo" target="_blank">8</a></sup>,  <ul class="ulbasic">
        <li class="libasic">const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useReducer()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#usereducer" target="_blank">9</a></sup> ~ An parallel option for useState(), takes data and saves it for later.   The noticeable difference is an additional function that allows you to edit / improve the raw data.  As useState(), there is a dispatch function to update it.<ul class="ulbasic">
        <li class="libasic">const [state, dispatch] = useReducer(reducer, initialArg, init);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useId()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#useid" target="_blank">10</a></sup> <sup><a href="https://towardsdev.com/useid-the-new-hook-introduced-in-react-18-1ef2ce5c5353" target="_blank">11</a></sup> ~ Added for server side rendering, generates a unique ID, to for example link a LABEL and INPUT elements.  Created value is a computation of the object tree that React is rendering <sup><a href="https://beta.reactjs.org/apis/react/useId#specifying-a-shared-prefix-for-all-generated-ids" target="_blank">12</a></sup>; if different values are needed, manually add suffixes; secondly cannot be used for keys in any lists.<ul class="ulbasic">
        <li class="libasic">const id = useId();</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic">...   </li>
    <li class="libasic"><b>useCallback()</b> <sup><a href="https://beta.reactjs.org/apis/react/useCallback" target="_blank">13</a></sup> <sup><a href="https://dmitripavlutin.com/react-usecallback/" target="_blank">14</a></sup> ~ Creates a memorised function that will execute when the params change.  This is to be used when passing data to child components that use refs.  Is equivalent to a useMemo() call. <ul class="ulbasic">
        <li class="libasic">const memoizedCallback = useCallback( () =&gt; {  doSomething(a, b); }, [a, b],);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useRef()</b> <sup><a href="https://beta.reactjs.org/apis/react/useRef" target="_blank">15</a></sup> <sup><a href="https://medium.com/trabe/react-useref-hook-b6c9d39e2022" target="_blank">16</a></sup> ~ Ref is short for Reference; this is a smart pointer structure.   The pointed-to data is mutable.<ul class="ulbasic">
        <li class="libasic">const refContainer = useRef(initialValue);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useTransition()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#usetransition" target="_blank">17</a></sup> <sup><a href="https://betterprogramming.pub/the-complete-guide-to-react-18-dd8763430345" target="_blank">18</a></sup>.  Invokes a callback on the next relevant priority update cycle in the render function.  Transitions are similar to RDBMS Locks; it's a scheduling feature not get block small really visible updates by things that require computation.   <ul class="ulbasic">
        <li class="libasic">const [isPending, startTransition] = useTransition();</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useDeferredValue()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html?#usedeferredvalue" target="_blank">19</a></sup> <sup><a href="https://academind.com/tutorials/react-usetransition-vs-usedeferredvalue#usedeferredvalue-in-action" target="_blank">20</a></sup> ~ Uses the current value until a Promise resolves then uses the new value.  The updated value will be applied as soon as any current render()s are complete. <ul class="ulbasic">
        <li class="libasic">const deferredValue = useDeferredValue(value);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useImperativeHandle()</b> <sup><a href="https://beta.reactjs.org/apis/react/useImperativeHandle" target="_blank">21</a></sup> <sup><a href="https://medium.com/trabe/react-useref-hook-b6c9d39e2022" target="_blank">22</a></sup> <sup><a href="https://reactjs.org/docs/hooks-reference.html#useimperativehandle" target="_blank">23</a></sup> ~ Try to avoid using this because React is trying not to be imperative and performance is terible.   Creates an action ~ the createHandle ~ that will be executed when data exposed to a parent ref is changed.   <ul class="ulbasic">
        <li class="libasic">useImperativeHandle(ref, createHandle, [deps]);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useLayoutEffect()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#uselayouteffect" target="_blank">24</a></sup> <sup><a href="https://blog.logrocket.com/useeffect-vs-uselayouteffect-examples/" target="_blank">25</a></sup> ~ Note same signature as useEffect (preceeding); but this one fires after render/ *any* changes to the DOM, rather than params. <ul class="ulbasic">
        <li class="libasic">useLayoutEffect(()=&gt;()=&gt;void, [data*]); </li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useInsertionEffect()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#useinsertioneffect" target="_blank">26</a></sup> ~ A hook that allows CSS-in-JS libraries.  Fires before render()/ DOM changes.<ul class="ulbasic">
        <li class="libasic">useInsertionEffect(()=&gt;()=&gt;void, [data*]); </li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useSyncExternalStore()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore" target="_blank">27</a></sup> ~ Probably for library dev only,   Clearly named function, allows a non-standard Redux-clone library.<ul class="ulbasic">
        <li class="libasic">const state = useSyncExternalStore(subscribe, getSnapshot[, getServerSnapshot]); </li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useDebugValue()</b> <sup><a href="https://beta.reactjs.org/apis/react/useDebugValue" target="_blank">28</a></sup> <sup><a href="https://reactjsguru.com/react-usedebugvalue-hook/" target="_blank">29</a></sup> ~ Renders a value to ReactDebugTools<a class="" href="https://www.google.co.uk/search?q=ReactDebugTools">?</a>; Also supports a version without the Adaptor. <ul class="ulbasic">
        <li class="libasic">useDebugValue(data, (data) =&gt; any);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>useContext()</b> <sup><a href="https://reactjs.org/docs/hooks-reference.html#usecontext" target="_blank">30</a></sup> “Context provides a way to pass data through the component tree without having to pass props down manually at every level.&quot; <sup><a href="https://reactjs.org/docs/context.html" target="_blank">31</a></sup> <ul class="ulbasic">
        <li class="libasic">const MyContext = React.createContext(defaultValue); const value = useContext(MyContext);</li>
        <li class="libasic">package: React</li>
    </ul></li>
    <li class="libasic"><b>isValidElement()</b> <sup><a href="https://reactjs.org/docs/react-api.html#isvalidelement" target="_blank">32</a></sup> As self-described. Returns boolean.<ul class="ulbasic">
        <li class="libasic">package: React</li>
    </ul></li>
</ul>


</div>
<hr />
<div class="lotsOfWords">

<h3 class="dontend" id="toc4"> React18 methods <a href="#toc4"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>
<ul class="ulbasic">
    <li class="libasic"><b>constructor()</b> <sup><a href="https://reactjs.org/docs/react-component.html#constructor" target="_blank">1</a></sup>, only used when your components are more complex.  General notes for functions <sup><a href="https://reactjs.org/docs/react-api.html" target="_blank">2</a></sup><ul class="ulbasic">
        <li class="libasic">projecf: React</li>
    </ul></li>
    <li class="libasic"><b>render()</b> <sup><a href="https://reactjs.org/docs/react-component.html#render" target="_blank">3</a></sup> ~ The “main function” that most people see as “React”. This should specify how to convert this React interface/ object / component (term depending on version) into a DOM Island.   This has magic-context-free access to class variables; but is typically considered a pure function for performance outcomes.    <ul class="ulbasic">
        <li class="libasic">project: React</li>
    </ul></li>
    <li class="libasic"><b>createRef() / useRef()</b> <sup><a href="https://beta.reactjs.org/apis/react/createRef" target="_blank">4</a></sup> <sup><a href="https://reactjs.org/docs/react-api.html#reactcreateref" target="_blank">5</a></sup> Creates a reference to the current Component, so it can be manipulated (see closures) <sup><a href="https://stackoverflow.com/questions/65418747/how-does-react-createref-actually-work" target="_blank">6</a></sup>.<ul class="ulbasic">
        <li class="libasic">const refContainer = useRef(initialValue);</li>
        <li class="libasic">projecf: React</li>
    </ul></li>
    <li class="libasic"><b>setState()</b> <sup><a href="https://reactjs.org/docs/react-component.html#setstate" target="_blank">7</a></sup>.  Setter function to assign a value to the Components local state; needs to be used in conjunction with componentDidUpdate <sup><a href="https://reactjs.org/docs/state-and-lifecycle.html" target="_blank">8</a></sup> <sup><a href="https://riptutorial.com/reactjs/example/5936/setstate" target="_blank">9</a></sup><ul class="ulbasic">
        <li class="libasic">setState(updater[, callback])    </li>
        <li class="libasic">projecf: React</li>
    </ul></li>
    <li class="libasic"><b>createRoot()</b> <sup><a href="https://beta.reactjs.org/apis/react-dom/client/createRoot" target="_blank">10</a></sup> <sup><a href="https://reactjs.org/docs/react-dom-client.html#createroot" target="_blank">11</a></sup> <sup><a href="https://www.syncfusion.com/blogs/post/everything-you-should-know-about-react-18.aspx" target="_blank">12</a></sup> <sup><a href="https://www.techiediaries.com/react-18-createroot/" target="_blank">13</a></sup>.   This is the new way to start executing a React project.  As the 'React thing' is a data tree, this is its root; and bound to a real DOM node.<ul class="ulbasic">
        <li class="libasic">createRoot(container[, options]);</li>
        <li class="libasic">project: react-dom</li>
    </ul></li>
    <li class="libasic"><b>hydrateRoot()</b> <sup><a href="https://beta.reactjs.org/apis/react-dom/client/hydrateRoot" target="_blank">14</a></sup> When a react node is built on a server; this call adds the actual data into it, to be run on the client. <ul class="ulbasic">
        <li class="libasic">const root = hydrateRoot(domNode, reactNode, options?)</li>
        <li class="libasic">project: react-dom</li>
    </ul></li>
</ul>

<p>Limit use of (React tries to organise changes so they are executed quickly, but this may not be the order you want):</p>

<ul class="ulbasic">
    <li class="libasic"><b>flushSync()</b> <sup><a href="https://beta.reactjs.org/apis/react-dom/flushSync" target="_blank">15</a></sup> ~ Most updates are async and batched; this makes updates synchronous, please read caveats in next link <sup><a href="https://beta.reactjs.org/apis/react-dom/flushSync" target="_blank">16</a></sup> <sup><a href="https://stackoverflow.com/questions/62725935/what-does-flushsync-do-in-react" target="_blank">17</a></sup> <ul class="ulbasic">
        <li class="libasic">flushSync(callback)  </li>
        <li class="libasic">project: react-dom</li>
    </ul></li>
    <li class="libasic"><b>forceUpdate()</b> <sup><a href="https://reactjs.org/docs/react-component.html#forceupdate" target="_blank">18</a></sup> <sup><a href="https://stackoverflow.com/questions/57883814/forceupdate-with-react-hooks" target="_blank">19</a></sup> ~ Forces a render() to happen now on this component. <ul class="ulbasic">
        <li class="libasic">component.forceUpdate(callback)</li>
        <li class="libasic">project: react/Component</li>
    </ul></li>
</ul>

<p>Less common lifecycle methods:</p>

<ul class="ulbasic">
    <li class="libasic"><b>componentDidMount()</b> <sup><a href="https://reactjs.org/docs/react-component.html#mounting" target="_blank">20</a></sup> ~ A function to report when a component is mounted; implement to do things like setup timers.  <ul class="ulbasic">
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic"><b>componentWillUnmount()</b> <sup><a href="https://reactjs.org/docs/react-component.html#unmounting" target="_blank">21</a></sup> ~ A function to undo whatever happened in componentDidMount.<ul class="ulbasic">
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic"><b>shouldComponentUpdate()</b> <sup><a href="https://reactjs.org/docs/react-component.html#shouldcomponentupdate" target="_blank">22</a></sup> <sup><a href="https://wanago.io/2019/07/08/algorithm-react-update-the-view-increasing-the-performance/" target="_blank">23</a></sup> used as a test, and is a micro-optimisation, shouldn't affect local state. <ul class="ulbasic">
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic"><b>componentDidUpdate()</b> <sup><a href="https://reactjs.org/docs/react-component.html#updating" target="_blank">24</a></sup> ~ A function that is triggered after render().  The notes <sup><a href="https://reactjs.org/docs/react-component.html#componentdidupdate" target="_blank">25</a></sup> say that this can be used for network requests, as long as there is a check for delta on data.    <ul class="ulbasic">
        <li class="libasic">componentDidUpdate(prevProps, prevState, snapshot) </li>
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic"><b>getSnapshotBeforeUpdate()</b> <sup><a href="https://reactjs.org/docs/react-component.html#getsnapshotbeforeupdate" target="_blank">26</a></sup> Allows access to DOM just before a state change is applied.<ul class="ulbasic">
        <li class="libasic">getSnapshotBeforeUpdate(prevProps, prevState)</li>
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic">static <b>getDerivedStateFromProps()</b> <sup><a href="https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops" target="_blank">27</a></sup> Used to be able to render data that is affected by time.  Note that is called in every render cycle.  Check if needed first as this will make code more complex.<ul class="ulbasic">
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic">static <b>getDerivedStateFromError()</b> <sup><a href="https://reactjs.org/docs/react-component.html#static-getderivedstatefromerror" target="_blank">28</a></sup> This function is used to supply a revised state; executed when an error is thrown, this gets passed the error.  <ul class="ulbasic">
        <li class="libasic">static getDerivedStateFromError(error)</li>
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic"><b>forwardRef()</b> <sup><a href="https://reactjs.org/docs/react-api.html#reactforwardref" target="_blank">29</a></sup> Creates a component that uses a ref that was made elsewhere. This new component is supposed to be inside/ below the older one<ul class="ulbasic">
        <li class="libasic">project: react</li>
    </ul></li>
    <li class="libasic"><b>componentDidCatch()</b> <sup><a href="https://reactjs.org/docs/react-component.html#componentdidcatch" target="_blank">30</a></sup>.  A method to catch errors created by child components; designed to be used for actions like logging.  <ul class="ulbasic">
        <li class="libasic">componentDidCatch(error, info)</li>
        <li class="libasic">project: react/Component</li>
    </ul></li>
    <li class="libasic"><b>lazy()</b> for SSR <sup><a href="https://reactjs.org/blog/2018/10/23/react-v-16-6.html" target="_blank">31</a></sup> <sup><a href="https://reactgo.com/tutorial-reactlazy-react-suspense/" target="_blank">32</a></sup> Function lets you render a dynamic import as a regular component.<ul class="ulbasic">
        <li class="libasic">const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));</li>
        <li class="libasic">project: react</li>
    </ul></li>
    <li class="libasic"><b>unmount()</b> <sup><a href="https://reactjs.org/docs/implementation-notes.html#unmounting" target="_blank">33</a></sup> <sup><a href="https://beta.reactjs.org/apis/react-dom/client/hydrateRoot#root-unmount" target="_blank">34</a></sup> <sup><a href="https://www.pluralsight.com/guides/how-to-unmount-react.js-node" target="_blank">35</a></sup> Deallocates local resources.<ul class="ulbasic">
        <li class="libasic">project: react</li>
    </ul></li>
    <li class="libasic"><b>memo()</b> <sup><a href="https://reactjs.org/docs/react-api.html#reactmemo" target="_blank">36</a></sup> A method version of useMemo() hook.<ul class="ulbasic">
        <li class="libasic">project: react</li>
    </ul></li>
    <li class="libasic">cloneElement(),  createContext(), createElement() are unchanged from previous versions <sup><a href="https://reactjs.org/docs/react-api.html#createelement" target="_blank">37</a></sup><ul class="ulbasic">
        <li class="libasic">project: react</li>
    </ul></li>
</ul>


<h3 class="dontend" id="toc5"> React18 built-in tags <a href="#toc5"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>
<ul class="ulbasic">
    <li class="libasic"><b>Fragment</b> <sup><a href="https://reactjs.org/docs/react-api.html#reactfragment" target="_blank">38</a></sup> You have probably used this as the next line; but this is its name.<ul class="ulbasic">
        <li class="libasic">&lt;&gt;&lt;/&gt;</li>
        <li class="libasic">project: React</li>
    </ul></li>
    <li class="libasic"><b>Suspense</b> <sup><a href="https://reactjs.org/docs/react-api.html#suspense" target="_blank">39</a></sup>, used to FP style supply a loading screen without branching, needs createRoot() to be active <sup><a href="https://blog.bitsrc.io/quick-walkthrough-to-suspenselist-in-react-b930d1ece892" target="_blank">40</a></sup> <sup><a href="https://betterprogramming.pub/the-complete-guide-to-react-18-dd8763430345" target="_blank">41</a></sup>.  <a href="https://dev.to/vaukalak/react-18-suspense-minimal-example-3j0k" target="_blank">Minimal sample</a>.    <ul class="ulbasic">
        <li class="libasic">project: React</li>
    </ul></li>
    <li class="libasic"><b>StrictMode</b> <sup><a href="https://reactjs.org/docs/strict-mode.html" target="_blank">42</a></sup> This is only for dev builds; enables more detailed error reporting.  In some code you get effects <sup><a href="https://blog.ag-grid.com/avoiding-react-18-double-mount/" target="_blank">43</a></sup> <sup><a href="https://stackoverflow.com/questions/61254372/my-react-component-is-rendering-twice-because-of-strict-mode" target="_blank">44</a></sup>.  <a href="https://medium.com/nmc-techblog/wait-youre-not-using-react-strictmode-a9713927a33b" target="_blank">Minimal example</a> <ul class="ulbasic">
        <li class="libasic">project: React</li>
    </ul></li>
    <li class="libasic"><del> SuspenseList</del> <sup><a href="https://yagmurcetintas.com/journal/whats-new-in-react-18" target="_blank">45</a></sup> Basically the same idea as previous, for a list of items.  ONLY EXISTS IN VERY EARLY VERSIONS OF React18, DO NOT USE <a href="https://www.programcreek.com/typescript/?api=react.SuspenseList" target="_blank">Minimal samples</a><ul class="ulbasic">
        <li class="libasic">project: React</li>
    </ul></li>
    <li class="libasic"><del>Offscreen</del>, ONLY EXISTS IN VERY EARLY VERSIONS OF React18, DO NOT USE.  If this feature is needed in stable versions of react18, try react-offscreen <a href="https://www.npmjs.com/package/react-offscreen" target="_blank">Minimal examples</a> in npmjs.<ul class="ulbasic">
        <li class="libasic">project: React</li>
    </ul></li>
    <li class="libasic">Interfaces/ base classes: <ul class="ulbasic">
        <li class="libasic"><b>React.Component</b> <sup><a href="https://beta.reactjs.org/reference/react/Component" target="_blank">46</a></sup> <sup><a href="https://reactjs.org/docs/react-component.html" target="_blank">47</a></sup>,</li>
        <li class="libasic"><b>React.FC</b> <sup><a href="https://medium.com/@harrymt/should-you-use-react-fc-for-typing-react-components-62cde9ba67c" target="_blank">48</a></sup> <sup><a href="https://www.pluralsight.com/guides/use-interface-props-in-functional-components-using-typescript-with-react" target="_blank">49</a></sup> <sup><a href="https://medium.com/raccoons-group/why-you-probably-shouldnt-use-react-fc-to-type-your-react-components-37ca1243dd13" target="_blank">50</a></sup> aka FunctionComponent,</li>
        <li class="libasic"><b>React.VFC</b> <sup><a href="https://www.mydatahack.com/using-react-vfc-instead-of-react-fc/" target="_blank">51</a></sup> aka VoidFunctionComponent and </li>
        <li class="libasic"><b>React.SFC</b> aka StatelessFunctionComponent <sup><a href="https://medium.com/@ethan_ikt/react-stateless-functional-component-with-typescript-ce5043466011" target="_blank">52</a></sup> <sup><a href="https://stackoverflow.com/questions/40748397/how-to-use-children-with-react-stateless-functional-component-in-typescript" target="_blank">53</a></sup> <sup><a href="https://stackoverflow.com/questions/53885993/react-16-7-react-sfc-is-now-deprecated" target="_blank">54</a></sup>.  </li>
        <li class="libasic"><b>ErrorBoundary<a class="" href="https://www.google.co.uk/search?q=ErrorBoundary">?</a></b> <sup><a href="https://reactjs.org/docs/error-boundaries.html" target="_blank">55</a></sup> <sup><a href="https://blog.pusher.com/react-error-boundaries/" target="_blank">56</a></sup> a small feature to localise error handling, rather than use a single global errorhandler; leading to easier to diagnose and therefore fix problems.</li>
        <li class="libasic">These are not actually tags, but used to make them.</li>
        <li class="libasic">Note only Component is in the basic user-docs; I mention the rest as this is “everything docs”.   They are being added and deprecated quite quickly.</li>
        <li class="libasic">Note2, watch for presence or absence of Children data-member. One can add it if absent. </li>
        <li class="libasic">project: React, variety of versions</li>
    </ul></li>
</ul>

<p>I was expecting the list of built-in tags to be longer; I have walked the exported Objects, and there are no more.</p>


</div>

</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentGroup" --data-group="research"><a name="adjacent" href=""></a> <p>Some similar articles in research </p><div id="groupresearch" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=research" title="This article lists all items in research group.">All of <br />research </a></span> </div> </div> 
  </div>
  <fieldset class="outer_menu articleHeader">
	<legend></legend>
	<nav>

		<div id="navBar" class="row">
			<div class="column">
				<div class="top-bar fullWidth">
					<header><h1>React 18 Architecture</h1></header>
			    	<p class="bigScreenOnly">   </p>
				</div>
				<div id="shareGroup" class="bibbles row addReading">
					<span class="allButtons"> 
						<a id="siteChartLink" class="button smallScreenOnly" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a>
						<a id="rssLink" href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i> </a> 
						<a class="button smallScreenOnly" id="shareMenuTrigger"> Share </a>
						<span class="bigScreenOnly">Share: </span>
						<a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Freact18-notes" title="Share this resource on your twitter account." target="_blank" class="bigScreenOnly"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i></a>
						<a href="#" id="mastoTrigger" class="button masto bigScreenOnly" title="Share to *your* mastodon server"  >	<i class="fa fa-mastodon" aria-label="Share this resource on your mastodon account." aria-hidden="true"></i> </a>
						<a href="https://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Freact18-notes" target="_blank" title="Share this article on reddit" class="bigScreenOnly" ><i aria-label="Share this article on reddit." class="fa fa-reddit-square" aria-hidden="true"></i></a>
						<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Freact18-notes" aria-label="share to linked-in" target="_blank" class="bigScreenOnly" title="Share this article on linked-in." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article on linked-in."></i></a>
					</span>

					<span class="ultraSkinny bigScreenOnly"> 
						<span>Edited <time datetime="2023-03-06T09:25:25">6th of Mar 2023</time>
						</span>
						<span>Created <time datetime="2022-08-01T00:00:00" title="if the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" >1st of Aug 2022</time> </span>
					</span>

				</div>
			</div>
			<dialog id="popup" class="popup1 bigScreenOnly">
				<form method="dialog" encoding="multipart/form-data" action="." name="mastoSelection"  >
					<label for="mastodonserver">your server: 
						<input id="mastodonserver" max-length="50" --data-url="https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Freact18-notes" type="text" value="" placeholder="mastodon.social" />  
					</label> 
					<a id="sendMasto" class="button masto" href="#" title="Share article to *your* mastodon server">Share now</a>
					<a class="button trimmed" id="hideMasto" href="#" title="Close popup"> <i class="fa fa-cancel" aria-hidden="true"></i> </a>
				</form>
			</dialog>

<fieldset class="h4_menu column bigScreenOnly ">
<legend><a id="pageMenu"><i class="fa fa-ob1burger" aria-hidden="true"></i> </a></legend>
<menu class="h4_lean">
<li class="h4_odd"><a href="#toc0">Architecture prefix</a></li>
<li><a href="#toc1">React18 hooks</a></li>
<li class="h4_odd"><a href="#toc2">React18 methods</a></li>
<li><a href="#toc3">React18 built-in tags</a></li>
</menu>
<br />

</fieldset>
	</div>
<menu class="burgerMenu" >
<li class="h4_odd">Additional features</li>
<li class=""><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li class="h4_odd"><a href="/resource/search">Search <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="/resource/appearance">Appearance <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="/resource/contact-me">Contact me <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="#adjacent">Similar articles</a></li>
</menu>
	</nav>
</fieldset>
		</div>
 </div>
 <br class="blocker" />
 <div id="biblio"></div>
 <br class="blocker" />
 <footer>
  <div class="h4_footer"> 
	<div class="leftFooter">
		<a aria-label="Validate CSS" href="https://jigsaw.w3.org/css-validator/check/referer"><img src="/asset/validCSS.png" alt="Valid CSS!" /></a> 
		<a href="https://validator.w3.org/check?uri=referer" aria-label="Validate HTML"><img src="/asset/valid-xhtml10.png" alt="Valid XHTML 1.0 Transitional, unfortunately no HTML5 available" /></a>
	</div>
	<div class="leftFooter"> 
		<a href="https://www.plainenglish.co.uk/services/webcheck.html" target="_blank" title="They, er, don't have a service for >190,000 word sites, so no logo.">Campaign for Plain English</a><br />
		My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i style="font-size:200%; margin-bottom:0px;" class="fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i></a>
	</div> 
	<p> Page rendered <time datetime="2023-04-17T08:50:12">17th of Apr 2023, 8:50:12</time>, Copyright &copy; 2022 Owen Beresford, <a class="" href="https://owenberesford.me.uk/resource/contact-me#">contact me</a>.  Last modified <time datetime="2023-03-06T09:25:25">6th of Mar 2023</time>.
    <p>Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence#" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
</div>
</footer>
<script src="/asset/ob1.min.js" ></script>

</body>
</html>