<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 240,000 words, please read some of them. -->
<title>Diverse Emoji / Emoticon</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.06" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="A maquette to explore options actually work for creating multi-char emoji.  These are mostly for phone, but support is very varied." />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="Diverse Emoji / Emoticon" />
<meta itemprop="description" content="A maquette to explore options actually work for creating multi-char emoji.  These are mostly for phone, but support is very varied." />
<meta name="twitter:site" content="@channelOwen" />
<meta name="twitter:title" content="Diverse Emoji / Emoticon" />
<meta name="twitter:description" content="A maquette to explore options actually work for creating multi-char emoji.  These are mostly for phone, but support is very varied." />
<meta name="twitter:creator" content="@channelOwen" />
<meta property="og:title" content="Diverse Emoji / Emoticon" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/diverse-emoji" />
<meta property="og:description" content="A maquette to explore options actually work for creating multi-char emoji.  These are mostly for phone, but support is very varied." />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="11th of Sep 2025, 18:35:43" />
<meta property="article:modified_time" content="Sep '25" />
<link rel="canonical" href="https://owenberesford.me.uk/resource/diverse-emoji" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "Diverse Emoji / Emoticon",
	"article:published_time":"11th of Sep 2025, 18:35:43", 
    "article:modified_time":"Sep '25",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body" class="annoyingBody" data-access="0">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker advancedEmojiContainer addReferences extraFonts popOverWidget">
<div class="halferWords">
<p class="accessSrc"> <a href="#emojiMixer" class="button" title="Jump straight to the Emoji mixer">Skip to Emoji mixer</a> </p>
<p>There are loads of <i>programming</i> notes about being able to merge UTF-8 Emoji, to more complex shapes.  I like this feature of UTF-8.  However, I am unable to find a <i>simple GUI</i> for merging the UTF-8 together to be able to see what the results are. Thus, please see below.  This maquette can be used from a big-screen to explore what faces can be built, even if you actually want the emoji on your phone.</p>

<p>I found a rough similar thing in npmjs <a href="https://www.npmjs.com/package/emoji-mart" target="_blank">emoji-mart</a>.   There are several packages that render small images, rather than emoji.  Unless they are afraid on lack of standards between devices, I do not see why they use this strategy.  If you want to use more rare emoji in a text message, a HTML IMG tag isn't very useful.</p>

<p>The basic range of emoji (ie smilies) <sup><a href="https://emojipedia.org/people/" target="_blank">1</a></sup>, or with emotion added <sup><a href="https://emojiguide.org/smileys-and-emotion" target="_blank">2</a></sup>.   The emoji lists on the unicode sites are streaming API, these are about 35MB web-pages each.   Fast loading asset to see number of available glyths <sup><a href="https://unicode.org/emoji/charts/emoji-counts.html" target="_blank">3</a></sup>, mentioned so you know how long to wait for the following links.  Two lists for emoji, in a different grid layout <sup><a href="https://unicode.org/emoji/charts/full-emoji-list.html" target="_blank">4</a></sup> <sup><a href="https://unicode.org/emoji/charts/emoji-list.html" target="_blank">5</a></sup>. The specific data for skin tones <sup><a href="https://unicode.org/emoji/charts/full-emoji-modifiers.html" target="_blank">6</a></sup>.</p>

<p><i>I mention <a href="https://apps.apple.com/us/app/idiversicons-1st-diverse-emoji/id947572946" target="_blank">iDiversicons</a> <sup><a href="https://www.idiversicons.com/" target="_blank">7</a></sup>, as Wired says <sup><a href="https://www.wired.com/story/why-the-emoji-skin-tone-you-choose-matters/" target="_blank">8</a></sup> this was the first technology to deliver non-Simpsons-colour emoji.</i><br />
I am more interested in clear symbols, that it being pixel perfect identical on each platform. The emoji do change styles quite a lot between devices.   Its a shame that the faces are a single standard, without regional/ locale variation.</p>

<p>General support for diverse emoji on Android (i.e. not a chat platform's stickers) is stable <sup><a href="https://www.androidauthority.com/android-emoji-745065/" target="_blank">9</a></sup> <sup><a href="https://www.androidauthority.com/how-to-create-a-custom-emoji-on-an-android-1649486/" target="_blank">10</a></sup>.   Basically use Android &gt; 4.4 (released 2014 <sup><a href="https://en.wikipedia.org/wiki/Android_version_history" target="_blank">11</a></sup>, so easy).   <br />
General support for diverse emoji on iPhone <sup><a href="https://support.apple.com/en-gb/HT202332" target="_blank">12</a></sup> <sup><a href="https://www.imore.com/how-use-new-diverse-emoji-keyboard-iphone-and-ipad" target="_blank">13</a></sup> or iPad <sup><a href="https://www.techjunkie.com/change-skin-tone-emoji-iphone-ipad-mac/" target="_blank">14</a></sup>.   As part of the stronger design motif, the emoji are catalogued here <sup><a href="https://emojipedia.org/apple/" target="_blank">15</a></sup></p>


<fieldset class="browserTestingContainer">
<legend> This feature has been tested on:</legend>
<ul class="ulbasic">
<li> ✔ <i class="fa fa-chrome"></i> win32/chrome </li>
<li> ✔ <i class="fa fa-edge"></i> win32/Edge </li>
<li> ✔ <i class="fa fa-firefox"></i> win32/Firefox (this is not a chrome codebase) </li>
<li> ✔ <i class="fa fa-safari"></i> mac x/safari </li>
<li> ✔ <i class="fa fa-chrome"></i> mac x/chrome </li>
<li> ✔ <i class="fa fa-chrome"></i> droid/chrome </li>
<li> ✔ <i class="fa fa-firefox"></i> droid/firefox </li>
<li> &nbsp;-&nbsp; <i class="fa fa-safari"></i> iphone/safari (untested) </li>
<li> &nbsp;-&nbsp; <i class="fa fa-chrome"></i> iphone/chrome (untested) </li>
<li>My first batch of testing is on available Linux browsers, as they are closer to hand.</li>
</ul>

<details class="singlePopup">
<summary>Other browsers</Summary>
I am not testing on the following, as they use the Chrome code-base as a starting point:
<ul class="ulbasic">
<li> Samsung Internet </li>
<li> Opera </li>
<li> Brave </li>
</ul>
I have never tested on (but for specific geo-markets should do):
<ul class="ulbasic">
<li> Vivaldi </li>
<li> Kameleo</li>
<li> Yandex</li>
<li> QQ</li>
<li> Soque Explorer</li>
<li> Blackberry browser </li>
<li> <i class="fa fa-internet-explorer"></i> win32/MSIE (unsupported legacy) (untested) </li>
</ul>
</details>
</fieldset>
<div class="pullout">
<p>I did some experimentation.   I would like this maquette to work with basic fonts, as this widget is just to enhance discoverability of symbols.  Not all symbols can be mixed, which is why the fourth list is very long.  <br />
⚠ WARNING ⚠: My phone with Android 11 doesn't allow anyone to be employed at all (the emojis seem to be different symbols, as the roles are available via the menus).</p>


</div>
<br />
<div id="emojiMixer">
<label for="basicFaces">Chose a face to decorate:

<div id="basicFaces" class="slider bigSmiles">
<span>Add content here</span>
</div>
</label>
<label for="modifiers1" >
Optionally change appearance:
<div id="modifiers1" class="slider bigSmiles">
<span>Add content here</span>
</div>
</label>
<label for="modifiers2" >
Optionally choose profession: 
<div id="modifiers2" class="slider bigSmiles">
<span>Add content here</span>
</div>
</label>
<label for="modifiers3" >
Optionally add another modifier: 
<div id="modifiers3" class="slider bigSmiles">
<span>Add content here</span>
</div>
</label>

<br />
<div>
<div class="smallScreenWrap">
<span id="createEmoji" class="button" 
	title="Merge selected characters to make the combined UTF-8 char">
	Generate emoji</span> 
<span id="resetBtn" class="button" 
	title="clear all selections">
	Reset</span> 
</div>
<div class="smallScreenWrap">
<span id="sum" class="results bigSmiles"
	>  </span>
<span id="andCopy" class="button" disabled="disabled"
	title="If your browser settings allow it, this button will put current character into the clipboard">
	copy</span>
</div>
</div>
</div>
<br />

</div>
</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentWidget" data-group="uitools" title="Use the first link to get the complete range of the group." > <p>Some similar articles in uitools </p>
<div id="groupuitools" class="adjacentList"><a class="adjacentItem button" href="/resource/group-XXX?first=uitools" aria-label="This article lists all items in uitools group.">All of <br />uitools<br /> articles </a> <noscript>Seeing this means the Adjacent feature is <strong>disabled</strong><br /> Try the full page link on the left </noscript></div>
 </div>

  </div>
  <fieldset class="articleHeader">
	<legend></legend>
	<nav id="navBar" class="row">
			<div class="column">
				<div class="top-bar fullWidth">
					<header><h1>Diverse Emoji / Emoticon</h1></header>
			    	<p role="status" class="bigScreenOnly">  This is only mentioning UTF-8 emoji, so is similar on all platforms  </p>
				</div>
				<div id="shareGroup" class="metaWidget row addReading">
					<span class="SMshareWidget"> 
						<a id="siteChartLink" class="button smallScreenOnly" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a>
						<a id="rssLink" href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i><span class="sr-only">RSS</span></a> 
						<span class="button smallScreenOnly" id="shareMenuTrigger" rel="nofollow" aria-haspopup="menu" > Share </span>
						<span class="bigScreenOnly">Share: </span>
                        <a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fdiverse-emoji" title="Share this resource on your twitter account." target="_blank" class="bigScreenOnly"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i><span class="sr-only">Twitter</span></a>
						<a href="#" id="mastoTrigger" class="masto bigScreenOnly" title="Share this article with *your* mastodon instance" aria-haspopup="dialog" >	<i class="fa fa-mastodon" aria-label="Share this article on *your* mastodon instance." aria-hidden="true"></i><span class="sr-only">Mastodon</span> </a>
						<a href="https://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fdiverse-emoji" target="_blank" title="Share this article with your Reddit audience" class="bigScreenOnly" ><i aria-label="Share this article with your Reddit audience." class="fa fa-reddit-square" aria-hidden="true"></i><span class="sr-only">Reddit </span> </a>
						<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fdiverse-emoji" target="_blank" class="bigScreenOnly" title="Share current article with your linked-in audience." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article with your linked-in audience."></i><span class="sr-only">Linkedin</span> </a>
						<a title="Share current article with Hacker news/ Y combinator audience" target="_blank" class="bigScreenOnly" href="http://news.ycombinator.com/submitlink?u=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fdiverse-emoji&amp;t=Diverse+Emoji+%2F+Emoticon"> <i class="fa fa-hacker-news" aria-label="Share this article with your Y combinator audience." aria-hidden="true"> </i><span class="sr-only">Hacker news</span> </a>
						<a title="Share this article with your Xing audience." href="https://www.xing.com/spi/shares/new?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fdiverse-emoji" target="_blank" class="bigScreenOnly" ><i class="fa fa-xing-square" aria-hidden="true" aria-label="Share this article with your Xing audience."></i><span class="sr-only">Xing</span> </a>
					</span>

					<span class="ultraSkinny bigScreenOnly"> 
						<span>Edited <time title="Page edited on 2025-09-11T18:11:04" datetime="2025-09-11T18:11:04">Sep '25</time>
						</span>
						<span>Created <time datetime="2023-06-01T00:00:00" title="If the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" >Jun '23</time> </span>
					</span>

				</div>
			</div>
			<dialog id="popup" class="mastodonWidget bigScreenOnly">
				<form method="dialog" enctype="multipart/form-data" action="." name="mastoSelection"  >
					<label for="mastodonserver">your server: 
						<input id="mastodonserver" maxlength="50" data-url="https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fdiverse-emoji" type="text" value="" placeholder="mastodon.social" />  
					</label> 
					<span id="sendMasto" class="button masto" title="Share article to *your* mastodon server">Share article now</span>
					<span class="button trimmed" id="hideMasto" title="Close popup"> <i class="fa fa-cancel" aria-hidden="true"></i> Cancel </span>
				</form>
			</dialog>
	
	<div class="bigScreenOnly column linksWidget">
		<details class="linksWidget" id="pageMenu">
			<summary class="defaultLinksTrigger fa-" aria-haspopup="menu"> <span class="sr-only">Menu</span> </summary>

			<menu class="dfl">
			<li>Additional features</li>
<li><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li><a href="/resource/search">Search 🔎 </a></li>
<li><a href="/resource/appearance">Appearance </a></li>
<li><a href="/resource/contact-me">Contact me 📞 </a></li>
<li><a href="#contentGroup">📜 Similar articles</a></li>
			</menu>
		</details>
		
	</div>
	<!-- /div -->
	</nav>
</fieldset>
 </div> 
 <div id="biblio" style="display:none;">
    <br class="blocker" />
 </div>
 <footer class="row footWidget"> 
	<div class="column leftFooter"> 
		<a href="https://www.plainenglish.co.uk/services" target="_blank" title="They, er, don't have a service for >250,000 word sites, so no logo.">Campaign for Plain English</a><br />
		My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i class="fixLinkedSq fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i><span class="sr-only">linkedin</span></a> ~ <abbr title="This content wasn't covered in my education, as it didn't exist at that point.">Young tech</abbr>
	</div> 
	<div class="column bigColumn">
		<p> Page rendered <time title="Page rendered on 2025-09-11T18:35:43" datetime="2025-09-11T18:35:43">11th of Sep 2025, 18:35:43</time>, Copyright &copy; 2022 Owen Beresford, <a href="https://owenberesford.me.uk/resource/contact-me">contact me</a>.  Last modified <time title="Page modified on 2025-09-11T18:11:04" datetime="2025-09-11T18:11:04">Sep '25</time>.
	    <p>Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
	</div>
 </footer>
<script type="module" src="/asset/ob1-202406.min.mjs" ></script>  
<style>
.advancedEmojiContainer { font-family:serif; } 
.advancedEmojiContainer .slider { white-space:nowrap; display:block; overflow-x:scroll; scroll-behavior: smooth; border:1px black solid;  }
.advancedEmojiContainer .slider span { scroll-snap-align: start; }
.advancedEmojiContainer .results { border:1px black solid; margin: 0.2em 1em; }
.advancedEmojiContainer .bigSmiles { font-size:170%; padding:0.3em 0.6em; } 
.advancedEmojiContainer span.results.bigSmiles { font-size:250%; }
.advancedEmojiContainer .active { background-color:#008000; }
.smallScreenWrap { display:inline-block; }

@media screen and (min-resolution: 150dpi) {
	.advancedEmojiContainer .slider { width:100vw; }
	.advancedEmojiContainer .bigSmiles { font-size:150%; } 
	.advancedEmojiContainer span.results.bigSmiles { font-size:300%; padding:0.3em 0.6em;  }
	.smallScreenWrap { display:block; }
}
</style>
<script type="module">
	import { hasBeenRun } from '/asset/ob1-202406.min.mjs';

// this could be a standalone module, but its more together if I keep it here
// this page took about 15h; far too much of that time was building this list of emoji
// in a working env, I would; use a js framework, use components, some external libs/ deps, create tests
// most of my test time for this page is "does this feel OK?", "what would improve the experience?" this code is very simple.
//
// This widget shows weird effects, like blonde emoji can't have a career, but can change their hairstyle.    
//
const FACES=[
  "👶",
  "🧒",
  "👦",
  "👧",
  "🧑",
  "👱",
  "👨",
  "🧔",
  "🧓",
  "👴",
  "👵",
  "🚶",
  "🧍",
  "🧎",
  "🏃",
  "🧘",
  "💃",
  "🕺",
  "🕴️",
  "👯",
  "🧜",
  "🙍",
  "👩",
  "🙎",
  "🙅",
  "🙆",
  "💁",
  "🙋",
  "🧏",
  "🙇",
  "🤦",
  "🤷",
  "🧑",
  "👨",
  "👩",
  "👮",
  "🕵️",
  "💂",
  "🥷",
  "👷",

];

const TONES=[
  String.fromCodePoint(0x1F3FB),
   String.fromCodePoint(0x1F3FC),	
   String.fromCodePoint(0x1F3FD),	
   String.fromCodePoint(0x1F3FE),
  String.fromCodePoint(0x1F3FF),
  "🦰",
  "🦱",
  "🦳",
  "🦲",
  "♀️",
  "♂️",

];

const JOBS=[
  "⚕️",
  "🎓",
  "⚖️",
  "🌾",
  "🏭",
  "🔧",
  "🔬",
  "💻",
  "🏫",
  "🍳",
  "🎓",
  "🎨",
  "🚒",
  "🚀",
  "🎄",
  "✈️",
  "🎤",
  "🥼",
  "🦺",
  "👔",
];

const EXTRAS=[
  "🧠",
  "🫀",
  "🫁",
  "🦷",
  "🦴",
  "👀",
  "👁️",
  "👅",
  "👄",
  "🫦",
  "😈",
  "👿",
  "💀",
  "☠️",
  "💩",
  "🤡",
  "👹",
  "👺",
  "👻",
  "👽",
  "👾",
  "🤖",
  "😀",
  "😃",
  "😄",
  "😁",
  "😆",
  "😅",
  "🤣",
  "😂",
  "🙂",
  "🙃",
  "🫠",
  "😉",
  "😊",
  "😇",
  "🥰",
  "😍",
  "🤩",
  "😘",
  "😗",
  "☺️",
  "😚",
  "😙",
  "🥲",
  "😋",
  "😛",
  "😜",
  "🤪",
  "😝",
  "🤑",
  "🤗",
  "🤭",
  "🫢",
  "🫣",
  "🤫",
  "🤔",
  "🫡",
  "🤐",
  "🤨",
  "😐",
  "😑",
  "😶",
  "🫥",
  "😏",
  "😒",
  "🙄",
  "😬",
  "🤥",
  "😌",
  "😔",
  "😪",
  "🤤",
  "😴",
  "😷",
  "🤒",
  "🤕",
  "🤢",
  "🤮",
  "🤧",
  "🥵",
  "🥶",
  "🥴",
  "😵",
  "🤯",
  "🤠",
  "🥳",
  "🥸",
  "😎",
  "🤓",
  "🧐",
  "😕",
  "🫤",
  "😟",
  "🙁",
  "☹️",
  "😮",
  "😯",
  "😲",
  "😳",
  "🥺",
  "🥹",
  "😦",
  "😧",
  "😨",
  "😰",
  "😥",
  "😢",
  "😭",
  "😱",
  "😖",
  "😣",
  "😞",
  "😓",
  "😩",
  "😫",
  "🥱",
  "😤",
  "😡",
  "😠",
  "🤬",
  "😺",
  "😸",
  "😹",
  "😻",
  "😼",
  "😽",
  "🙀",
  "😿",
  "😾",
  "💋",
  "🍼",
  "🗣️",
  "👤",
  "👥",
  "🫂",
  "👣",
  "🧳",
  "🌂",
  "☂️",
  "🎃",
  "🧵",
  "🧶",
  "👓",
  "🕶️",
  "🥽",
  "👕",
  "👖",
  "🧣",
  "🧤",
  "🧥",
  "🧦",
  "👗",
  "👘",
  "🥻",
  "🩱",
  "🩲",
  "🩳",
  "👙",
  "👚",
  "👛",
  "👜",
  "👝",
  "🎒",
  "🩴",
  "👞",
  "👟",
  "🥾",
  "🥿",
  "👠",
  "👡",
  "🩰",
  "👢",
  "👑",
  "👒",
  "🎩",
  "🧢",
  "🪖",
  "⛑️",
  "💄",
  "💍",
  "🩸",
  "💼",
  "💨",
  "👋",
  "🤚",
  "🖐️",
  "✋",
  "🖖", // add comma here
  "🫱",
  "🫲",
  "🫳",
  "🫴",
  "👌",
  "🤌",
  "🤏",
  "✌️",
  "🤞",
  "🫰",
  "🤟",
  "🤘",
  "🤙",
  "👈",
  "👉",
  "👆",
  "🖕",
  "👇",
  "☝️",
  "🫵",
  "👍",
  "👎",
  "✊",
  "👊",
  "🤛",
  "🤜",
  "👏",
  "🙌",
  "🫶",
  "👐",
  "🤲",
  "🤝",
  "🙏",
  "✍️",
  "💅",
  "🤳",
  "💪",
  "🦾",
  "🦿",
  "🦵",
  "🦶",
  "👂",
  "🦻",
  "👃",
  "💫",
  "🫅",
  "🤴",
  "👸",
  "👳",
  "👲",
  "🧕",
  "🤵",
  "👰",
  "🤰",
  "🫃",
  "🫄",
  "🤱",
  "👼",
  "🎅",
  "🤶",
  "🦸",
  "🦹",
  "🧙",
  "🧚",
  "🧛",
  "🧝",
  "🧞",
  "🧟",
  "🧌",
  "💆",
  "💇",
  "🦯",
  "🦼",
  "🦽",
  "🧖",
  "👭",
  "👫",
  "👬",
  "💏",
];
let stack=[];
let isTap4Real=true;
const BLOCK1='#basicFaces';
const BLOCK2='#modifiers1';
const BLOCK3='#modifiers2';
const BLOCK4='#modifiers3';
const BTN1='#createEmoji';
const BTN2='#resetBtn';
const BTN3='#andCopy';
const EACH_CHAR='#emojiMixer span.bigSmiles';
const RESULT='#sum';

const STEP=computeStep(BLOCK1);


function applyList(id, list) {
	const TT=document.querySelector(id);
	document.querySelector(id+' span').remove();
	for(let ii in list ) {
		let tt=document.createElement( "span"); 
		tt.setAttribute("class", "bigSmiles");		 
		tt.append( list[ii] );
		TT.append(tt);
	}
}

function applyWheel(id, step, event) {
	const item = document.querySelector(id);
	item.addEventListener(event, function (e) {
		e.preventDefault();
		if (e.deltaY > 0) { item.scrollLeft += step; }
		else { item.scrollLeft -= step; }
		return false;
	});
}

function computeStep(id) {
	return document.querySelector(id).getBoundingClientRect().width;
}

function addZWS(ar) {
	let buf=[];
	for (let ii in ar ) {
		buf.push( ar[ii] );
		buf.push( "&zwj;" );
	}
	buf.pop();
	return buf.join("");
}

function deSelect(what) {
	stack=[];
	Array.from( 
		document.querySelectorAll( what+".active" )
			 ).map( 
		(ele)=> { ele.classList.remove("active");  }
			 );
}

// https://stackoverflow.com/questions/52042029/insert-emoji-with-zero-width-joiner-using-javascript
function merge(e) {
	console.log("MERGE Called");
	e.preventDefault();
	if(stack.length===0) {
		console.warn("No data in stack (click on a face first)");
		return false
	}

	let dd=document.querySelector( RESULT);
	dd.innerHTML=addZWS(stack);	
	deSelect(EACH_CHAR);
	
	dd=document.querySelector( BTN3);
	if( navigator.clipboard && navigator.clipboard.writeText ) {
		dd.removeAttribute("disabled");
	}
	isTap4Real=true;
	return false;
}

function reset(e) {
	e.preventDefault();
	console.log("reset Called");
	let dd=document.querySelector( RESULT);
	dd.innerText=" ";

	deSelect(EACH_CHAR);
	dd=document.querySelector( BTN3);
	dd.setAttribute("disabled", "disabled");
	isTap4Real=true;
	return false;	
}

// https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript
function copyFunc(e) {
	e.preventDefault();
	console.log("copy Called");
	let tt=document.querySelector(RESULT);
	navigator.clipboard.writeText(tt.innerText);
	return false;	
}

function select(e) {
	e.preventDefault();
	if(! isTap4Real) { 
	//	console.log("this seems to be a drag, so no char "+e.target.innerText +" selected"); 
		isTap4Real=true;
		return;
	}

	if(e.target.innerText) {
		if( e.target.classList.contains("active")) {
			e.target.classList.remove("active");
			stack.splice( stack.indexOf( e.target.innerText ), 1 );
		} else {
			e.target.classList.add("active");
			stack.push( e.target.innerText );
		}
	} else {
		throw new Error("Why does '"+e.id+"' have no text?");
	}
	return false;	
}

function selectMask(e) {
	e.preventDefault();
	isTap4Real=false;
// maybe I should allow small movements?, will test
	return false;	
}

function selectFlag(e) {
	e.preventDefault();
	isTap4Real=true;
	return false;	
} 

// this is rendered on the client side, as this is a JAMstack site
function populate() {
	let copyable=true;
	if(! navigator.clipboard || !navigator.clipboard.writeText ) {
		copyable=false;
		window.alert("You have no access to copy/paste in the browser.\nUpgrade this error message.");
	}

	applyList(BLOCK1, FACES);
	applyList(BLOCK2, TONES);
	applyList(BLOCK3, JOBS);
	applyList(BLOCK4, EXTRAS);

	if(isMobile(document, location, window )) {
		const tmp=Array.from( document.querySelectorAll( EACH_CHAR ));
		tmp.map((ele) => { 
			if(ele.classList.contains("results") ) { return; }  

			ele.addEventListener("touchmove", selectMask ); 
			ele.addEventListener("touchend", select ); 
			ele.addEventListener("touchstart", selectFlag ); 
		});
	
		if(copyable) {
			const tmp= document.querySelector( BTN3 );
			tmp.addEventListener("touchstart", copyFunc );
		}

	} else {
		applyWheel(BLOCK1, STEP, "wheel");
		applyWheel(BLOCK2, STEP, "wheel");
		applyWheel(BLOCK3, STEP, "wheel");
		applyWheel(BLOCK4, STEP, "wheel");

		const tmp=Array.from(document.querySelectorAll( EACH_CHAR ));
		tmp.map((ele) => { 
			if(ele.classList.contains("results") ) { return; }  

			ele.addEventListener("click", select );
		});

		if(copyable) {
			const tmp= document.querySelector( BTN3 );
			tmp.addEventListener("click", copyFunc );
		}
	}

	{
	const item = document.querySelector(BTN1);
	item.addEventListener("click", merge);
	item.addEventListener("touchstart", merge);
	}
	{
	const item = document.querySelector(BTN2);
	item.addEventListener("click", reset);
	item.addEventListener("touchstart", reset);
	}
}

	if( hasBeenRun() === 0) {
		document.pageStartup=() => { populate(); };
	} else {
		populate();	
	}

</script>
</body>
</html>